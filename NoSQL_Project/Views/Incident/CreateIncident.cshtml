﻿@using NoSQL_Project.Models.Enums
@model NoSQL_Project.ViewModels.NewIncidentViewModel

@{
	ViewBag.Title = "Create Ticket";
}

<h2>Create Ticket</h2>

<form asp-action="CreateIncident" method="post">

	<!--Subject-->
	<div class="form-group" style="margin-bottom: 15px;">
		<label asp-for="Subject" class="control-label">Subject:</label>
		<input asp-for="Subject" class="form-control" required />
	</div>

	<!--Type-->
	<div class="form-group" style="margin-bottom: 15px;">
		<label asp-for="IncidentType" class="control-label">Type</label>
		<select asp-for="IncidentType" asp-items="Html.GetEnumSelectList<IncidentType>()" class="form-control" required> </select>

	</div>

	<!--Reported by-->
	<div class="form-group" style="margin-bottom: 15px;">
		<label>Reported by:</label>
		<span>@Model.Reporter.FirstName @Model.Reporter.LastName</span>

		<input asp-for="Reporter.UserId" type="hidden" />
		<input asp-for="Reporter.FirstName" type="hidden" />
		<input asp-for="Reporter.LastName" type="hidden" />
		<input asp-for="Reporter.EmailAddress" type="hidden" />
	</div>

	<!--Priority-->
	<div class="form-group" style="margin-bottom: 15px;">
		<label asp-for="Priority" class="control-label">Priority</label>
		<select asp-for="Priority" asp-items="Html.GetEnumSelectList<Priority>()" class="form-control" required>
		</select>
	</div>


	<!--Deadline-->
	<div class="form-group" style="margin-bottom: 15px;">
		<label asp-for="Deadline" class="control-label"></label>
		<select asp-for="Deadline" class="form-control" required>
			<option value="7">7 days</option>
			<option value="14">14 days</option>
			<option value="28">28 days</option>
		</select>
	</div>

	<!--Location-->
	<div class="form-group" style="margin-bottom: 15px;">
		<label class="form-label" for="Location">Location:</label>
		<select class="form-select" id="Location" name="LocationBranchName" required>
			<option value="">Select Location</option>
			@{
				if (ViewBag.Locations != null)
				{
					List<Location> dbLocations = ViewBag.Locations;
					foreach (var location in dbLocations)
					{
						<option style="color: black;" value="@location.Branch">@location.Branch</option>
					}
				}
			}

		</select>
	</div>


	<!--Description-->
	<div class="form-group" style="margin-bottom: 15px;">
		<label asp-for="Description" class="control-label"></label>
		<textarea asp-for="Description" class="form-control" rows="4" placeholder="Describe the incident" required></textarea>
	</div>

	<div style="display: flex; justify-content: space-between; margin-top: 20px;">
		<a asp-controller="Incident" asp-action="Index" class="btn btn-danger">Cancel</a>
		<button type="submit" class="btn btn-primary">Save</button>
	</div>
</form>